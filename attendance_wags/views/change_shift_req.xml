<openerp>
    <data>
        <record id="change_shift_req" model="ir.ui.view">
            <field name="name">change_shift_req</field>
            <field name="model">shift.change</field>
            <field name="arch" type="xml">
                <form string="Shift Change">

                    <header>
                        <button name="draft" string="Set to Draft" type="object" class="btn-primary" attrs="{'invisible': [('state','in', ('draft','manager_approve'))]}"/>
                        <button name="manager_approve" string="Approve" type="object" class="btn-primary" attrs="{'invisible': [('state','in', ('validate','manager_approve'))]}" />
                        <button name="validate" string="Validate" type="object" class="btn-primary" attrs="{'invisible': [('state','in', ('draft','validate'))]}"/>

                        <field name="state" widget="statusbar" statusbar_visible="draft,manager_approve,validate"/>
                    </header>
                    <sheet>
                        <group name="group_left">
                            <group name="group_top" string="Employee Details">
                                <field name="employee_id" readonly="0" attrs="{'readonly':[('state','!=', 'draft')]}" options="{'no_create':True,'no_edit':True,'no_open':True}"/>
                                <field name="emp_code" string ="Employee Id"  readonly="0"  attrs="{'readonly':[('state','!=', 'draft')]}"/>
                                <field name="current_shift_id" readonly="1"   force_save="1" options="{'no_create':True,'no_open':True}"  />
                                <field name="manager_id" readonly="1"   force_save="1" options="{'no_create':True,'no_open':True}"  /> 
                            </group>
                            <group name="group_right" string="Requested Details">

                                <field name="from_date"  attrs="{'readonly':[('state','!=', 'draft')]}"/>
                                <field name="to_date"  attrs="{'readonly':[('state','!=', 'draft')]}"/>
                                <field name="requested_shift_id" options="{'no_create':True,'no_edit':True,'no_open':True}" attrs="{'readonly':[('state','!=', 'draft')]}" />
                                <field name="reason"  attrs="{'readonly':[('state','!=', 'draft')]}"/>  
                                <field name="company_id" readonly="1" force_save="1"/>  
                            </group>   
                            <group  string="Admin Details">
                                <field name="create_uid" readonly="1" options="{'no_create':True,'no_open':True}"/>
                                <field name="create_date" readonly="1"/>
                            </group>
                        </group>
                    </sheet>
                    <div class="oe_chatter">
                      <field name="message_follower_ids" widget="mail_followers"/>
                      <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

        <record id="change_shift_req_tree" model="ir.ui.view">
            <field name="name">change_shift_req_tree</field>
            <field name="model">shift.change</field>
            <field name="arch" type="xml">
                <tree string="Shift Change Tree">
                    <field name="employee_id"/>
                    <field name="emp_code"/>
                    <field name="current_shift_id"/>
                    <field name="requested_shift_id"/>
                    <field name="from_date"/>
                    <field name="to_date"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>


        <record model="ir.actions.act_window" id="change_shift_menu_action">
            <field name="name">Shift Change</field>
            <field name="res_model">shift.change</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[]</field>
            <field name="context">{}</field>
            <field name="view_ids" eval="[(5, 0, 0),
            (0, 0, {'view_mode': 'tree', 'view_id': ref('change_shift_req_tree')}),
            (0, 0, {'view_mode': 'form', 'view_id': ref('change_shift_req')})]"/>
        </record>

        
        
        <menuitem id="shifts_management_menu" name="Shifts Management" parent="attendance_wags.menu_hr_attendance_root_wags" groups="base_access_rights.admin_non_technical"/>
        
        <!-- <menuitem id="shift_menu" name="Shifts 111" parent="attendance_wags.shifts_management_menu"/> -->
        <menuitem id="shift_change_management_menu" name="Shift Change Request" action="change_shift_menu_action" parent="attendance_wags.shifts_management_menu" groups="base_access_rights.admin_non_technical"/>

    </data>
</openerp>
